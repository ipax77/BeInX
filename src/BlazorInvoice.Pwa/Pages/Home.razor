@page "/"
@using BlazorInvoice.Shared.Interfaces
@using System.Globalization
@inject IConfigService ConfigService

<PageTitle>BeInX</PageTitle>

<BlazorInvoice.Weblib.DashboardComponent />

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            var config = await ConfigService.GetConfig();
            if (!string.IsNullOrEmpty(config.CultureName))
            {
                var culture = new CultureInfo(config.CultureName);
                CultureInfo.CurrentCulture = culture;
                CultureInfo.DefaultThreadCurrentCulture = culture;
                CultureInfo.DefaultThreadCurrentUICulture = culture;
            }
            else
            {
                CultureInfo.DefaultThreadCurrentCulture = CultureInfo.CurrentCulture;
                CultureInfo.DefaultThreadCurrentUICulture = CultureInfo.CurrentCulture;
            }
        }
        await base.OnAfterRenderAsync(firstRender);
    }
}